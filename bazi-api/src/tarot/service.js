class TarotService {
  constructor() {
    this.cards = [];
    this.spreads = [];
    this.initializeCards();
    this.initializeSpreads();
  }

  initializeCards() {
    // ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ 22ì¥
    const majorArcana = [
      { id: 0, name: 'ë°”ë³´', suit: 'major', keywords: ['ìƒˆë¡œìš´ ì‹œì‘', 'ìˆœìˆ˜í•¨', 'ëª¨í—˜'] },
      { id: 1, name: 'ë§ˆë²•ì‚¬', suit: 'major', keywords: ['ì°½ì˜ë ¥', 'ì˜ì§€ë ¥', 'ê¸°ìˆ '] },
      { id: 2, name: 'ì—¬ì‚¬ì œ', suit: 'major', keywords: ['ì§ê°', 'ì§€í˜œ', 'ì‹ ë¹„'] },
      { id: 3, name: 'ì—¬í™©ì œ', suit: 'major', keywords: ['í’ìš”', 'ì°½ì¡°', 'ëª¨ì„±'] },
      { id: 4, name: 'í™©ì œ', suit: 'major', keywords: ['ê¶Œë ¥', 'ì•ˆì •', 'êµ¬ì¡°'] },
      { id: 5, name: 'êµí™©', suit: 'major', keywords: ['ì „í†µ', 'êµìœ¡', 'ì¢…êµ'] },
      { id: 6, name: 'ì—°ì¸', suit: 'major', keywords: ['ì‚¬ë‘', 'ì„ íƒ', 'ì¡°í™”'] },
      { id: 7, name: 'ì „ì°¨', suit: 'major', keywords: ['ìŠ¹ë¦¬', 'ì˜ì§€', 'í†µì œ'] },
      { id: 8, name: 'í˜', suit: 'major', keywords: ['ë‚´ë©´ì˜ í˜', 'ìš©ê¸°', 'ì¸ë‚´'] },
      { id: 9, name: 'ì€ë‘”ì', suit: 'major', keywords: ['ê³ ë…', 'ë‚´ë©´ íƒêµ¬', 'ì§€í˜œ'] },
      { id: 10, name: 'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´', suit: 'major', keywords: ['ë³€í™”', 'ìš´ëª…', 'ê¸°íšŒ'] },
      { id: 11, name: 'ì •ì˜', suit: 'major', keywords: ['ê· í˜•', 'ê³µì •', 'ì§„ì‹¤'] },
      { id: 12, name: 'ë§¤ë‹¬ë¦° ì‚¬ëŒ', suit: 'major', keywords: ['í¬ìƒ', 'ìƒˆë¡œìš´ ê´€ì ', 'ì •ì§€'] },
      { id: 13, name: 'ì£½ìŒ', suit: 'major', keywords: ['ë³€í™”', 'ë', 'ìƒˆë¡œìš´ ì‹œì‘'] },
      { id: 14, name: 'ì ˆì œ', suit: 'major', keywords: ['ê· í˜•', 'ì¡°í™”', 'ì¸ë‚´'] },
      { id: 15, name: 'ì•…ë§ˆ', suit: 'major', keywords: ['ì†ë°•', 'ìœ í˜¹', 'ë¬¼ì§ˆì£¼ì˜'] },
      { id: 16, name: 'íƒ‘', suit: 'major', keywords: ['íŒŒê´´', 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”', 'ê³„ì‹œ'] },
      { id: 17, name: 'ë³„', suit: 'major', keywords: ['í¬ë§', 'ì¹˜ìœ ', 'ì˜ê°'] },
      { id: 18, name: 'ë‹¬', suit: 'major', keywords: ['ì§ê°', 'í™˜ìƒ', 'ë‘ë ¤ì›€'] },
      { id: 19, name: 'íƒœì–‘', suit: 'major', keywords: ['ì„±ê³µ', 'í–‰ë³µ', 'í™œë ¥'] },
      { id: 20, name: 'ì‹¬íŒ', suit: 'major', keywords: ['ë¶€í™œ', 'ê°ì„±', 'ë³€í™”'] },
      { id: 21, name: 'ì„¸ê³„', suit: 'major', keywords: ['ì™„ì„±', 'ì„±ì·¨', 'í†µí•©'] }
    ];

    this.cards = majorArcana;
  }

  initializeSpreads() {
    this.spreads = [
      {
        id: 'single-card',
        name: 'ì¼ì¼ íƒ€ë¡œ',
        description: 'ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ìœ„í•œ í•œ ì¥ì˜ ì¹´ë“œ',
        cardCount: 1,
        positions: [
          { id: 1, name: 'ì˜¤ëŠ˜ì˜ ë©”ì‹œì§€', description: 'ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ìœ„í•œ ì¡°ì–¸' }
        ]
      },
      {
        id: 'three-card',
        name: '3ì¥ ì¹´ë“œ ì ',
        description: 'ê³¼ê±°-í˜„ì¬-ë¯¸ë˜ë¥¼ ë³´ëŠ” ê¸°ë³¸ì ì¸ ìŠ¤í”„ë ˆë“œ',
        cardCount: 3,
        positions: [
          { id: 1, name: 'ê³¼ê±°', description: 'ê³¼ê±°ì˜ ì˜í–¥ê³¼ ë°°ê²½' },
          { id: 2, name: 'í˜„ì¬', description: 'í˜„ì¬ ìƒí™©ê³¼ ë„ì „' },
          { id: 3, name: 'ë¯¸ë˜', description: 'ì•ìœ¼ë¡œì˜ ê°€ëŠ¥ì„±ê³¼ ì¡°ì–¸' }
        ]
      },
      {
        id: 'celtic-cross',
        name: 'ì¼ˆí‹± í¬ë¡œìŠ¤',
        description: 'ê°€ì¥ ìƒì„¸í•œ 10ì¥ ì¹´ë“œ ìŠ¤í”„ë ˆë“œ',
        cardCount: 10,
        positions: [
          { id: 1, name: 'í˜„ì¬ ìƒí™©', description: 'í˜„ì¬ì˜ í•µì‹¬ ë¬¸ì œ' },
          { id: 2, name: 'ë„ì „', description: 'ì§ë©´í•œ ë„ì „ê³¼ ì¥ì• ' },
          { id: 3, name: 'ê·¼ë³¸ ì›ì¸', description: 'ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸' },
          { id: 4, name: 'ê³¼ê±°', description: 'ê³¼ê±°ì˜ ì˜í–¥' },
          { id: 5, name: 'ê°€ëŠ¥í•œ ê²°ê³¼', description: 'ì•ìœ¼ë¡œì˜ ê°€ëŠ¥ì„±' },
          { id: 6, name: 'ê·¼ì²˜ ë¯¸ë˜', description: 'ê³§ ë‹¤ê°€ì˜¬ ìƒí™©' },
          { id: 7, name: 'ìì‹ ', description: 'ìì‹ ì˜ íƒœë„ì™€ ê°ì •' },
          { id: 8, name: 'í™˜ê²½', description: 'ì£¼ë³€ í™˜ê²½ê³¼ ì˜í–¥' },
          { id: 9, name: 'í¬ë§ê³¼ ë‘ë ¤ì›€', description: 'í¬ë§ê³¼ ë‘ë ¤ì›€' },
          { id: 10, name: 'ê²°ë¡ ', description: 'ìµœì¢… ê²°ê³¼ì™€ ì¡°ì–¸' }
        ]
      }
    ];
  }

  async drawCards(spreadId, question) {
    const spread = this.spreads.find(s => s.id === spreadId) || this.spreads[1];
    const drawnCards = [];
    const usedIds = new Set();

    for (let i = 0; i < spread.cardCount; i++) {
      let card;
      do {
        card = this.cards[Math.floor(Math.random() * this.cards.length)];
      } while (usedIds.has(card.id));
      
      usedIds.add(card.id);
      card.orientation = Math.random() > 0.5 ? 'upright' : 'reversed';
      card.position = spread.positions[i];
      drawnCards.push(card);
    }

    const interpretation = this.generateInterpretation(drawnCards, question, spread);

    return {
      id: Date.now().toString(),
      spread,
      cards: drawnCards,
      question,
      interpretation,
      timestamp: new Date().toISOString()
    };
  }

  generateInterpretation(cards, question, spread) {
    let interpretation = `# ğŸƒ íƒ€ë¡œ ì  ê²°ê³¼\n\n`;
    
    if (question) {
      interpretation += `**ì§ˆë¬¸**: ${question}\n\n`;
    }
    
    interpretation += `**ìŠ¤í”„ë ˆë“œ**: ${spread.name}\n`;
    interpretation += `**ì¹´ë“œ ìˆ˜**: ${spread.cardCount}ì¥\n`;
    interpretation += `**ì ì„± ì‹œê°„**: ${new Date().toLocaleString('ko-KR')}\n\n`;
    
    interpretation += `## ğŸŒŸ ì¹´ë“œ í•´ì„\n\n`;
    
    cards.forEach((card, index) => {
      const position = card.position;
      const orientation = card.orientation === 'upright' ? 'ì •ë°©í–¥' : 'ì—­ë°©í–¥';
      const orientationEmoji = card.orientation === 'upright' ? 'âœ¨' : 'ğŸ”„';
      
      interpretation += `### ${orientationEmoji} ${position?.name || `${index + 1}ë²ˆì§¸ ì¹´ë“œ`}\n`;
      interpretation += `**${card.name}** (${orientation})\n\n`;
      
      const keywords = card.keywords.join(', ');
      interpretation += `**í•µì‹¬ í‚¤ì›Œë“œ**: ${keywords}\n\n`;
      
      if (card.orientation === 'upright') {
        interpretation += `**ì •ë°©í–¥ ì˜ë¯¸**: ${this.getUprightMeaning(card)}\n\n`;
        interpretation += `**ì¡°ì–¸**: ${this.getUprightAdvice(card)}\n\n`;
      } else {
        interpretation += `**ì—­ë°©í–¥ ì˜ë¯¸**: ${this.getReversedMeaning(card)}\n\n`;
        interpretation += `**ì£¼ì˜ì‚¬í•­**: ${this.getReversedAdvice(card)}\n\n`;
      }
      
      if (index < cards.length - 1) {
        interpretation += `---\n\n`;
      }
    });
    
    interpretation += `## ğŸ’« ì „ì²´ ìš´ì„¸ í•´ì„\n\n`;
    interpretation += this.getOverallInterpretation(cards, question);
    
    return interpretation;
  }

  getUprightMeaning(card) {
    const meanings = {
      'ë°”ë³´': 'ìˆœìˆ˜í•œ ì˜í˜¼ì˜ ìƒˆë¡œìš´ ì—¬ì •ì„ ìƒì§•í•©ë‹ˆë‹¤. ë¬´ì§€í•¨ì´ ì˜¤íˆë ¤ ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ì—´ì–´ì£¼ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ë‘ë ¤ì›€ ì—†ì´ ë¯¸ì§€ì˜ ì„¸ê³„ë¡œ ë°œì„ ë‚´ë”›ìœ¼ì„¸ìš”. ëª¨ë“  ê²½í—˜ì´ ë‹¹ì‹ ì„ ì„±ì¥ì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤.',
      'ë§ˆë²•ì‚¬': 'ìš°ì£¼ì˜ ëª¨ë“  ì—ë„ˆì§€ë¥¼ ì†ì— ì¥ê³  ìˆëŠ” ê°•ë ¥í•œ ì°½ì¡°ìì…ë‹ˆë‹¤. ì˜ì§€ë ¥ê³¼ ì°½ì˜ë ¥ì´ ì ˆì •ì— ë‹¬í•œ ì‹œê¸°ë¡œ, ì›í•˜ëŠ” ëª¨ë“  ê²ƒì„ í˜„ì‹¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ì ì¬ë ¥ì„ ë¯¿ê³  í–‰ë™í•˜ì„¸ìš”.',
      'ì—¬ì‚¬ì œ': 'ì‹ ë¹„ë¡œìš´ ë‚´ë©´ì˜ ì§€í˜œì™€ ì§ê°ì˜ ì—¬ì‹ ì…ë‹ˆë‹¤. í‘œë©´ì  ì§€ì‹ì´ ì•„ë‹Œ ì˜í˜¼ ê¹Šì€ ê³³ì—ì„œ ì˜¤ëŠ” í†µì°°ì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ëª…ìƒê³¼ ìê¸° ì„±ì°°ì„ í†µí•´ ìˆ¨ê²¨ì§„ ì§„ì‹¤ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì—¬í™©ì œ': 'ëŒ€ì§€ì˜ í’ìš”ë¡œì›€ê³¼ ì°½ì¡°ì˜ ì—¬ì‹ ì…ë‹ˆë‹¤. ìì—°ì˜ í’ë¶€í•œ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤. ì°½ì¡°ì  í™œë™ê³¼ ì„±ì¥ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ë£¨ì–´ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìì‹ ì˜ ì°½ì¡°ë ¥ì„ ììœ ë¡­ê²Œ í‘œí˜„í•˜ì„¸ìš”.',
      'í™©ì œ': 'ê°•ë ¥í•œ ë¦¬ë”ì‹­ê³¼ ì•ˆì •ì˜ ìƒì§•ì…ë‹ˆë‹¤. ì²´ê³„ì ì´ê³  êµ¬ì¡°í™”ëœ ì ‘ê·¼ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¶Œìœ„ì™€ ì±…ì„ê°ì„ ê°€ì§€ê³  ìƒí™©ì„ ì£¼ë„í•˜ì„¸ìš”. í™•ê³ í•œ ê¸°ë°˜ ìœ„ì—ì„œ ì„±ê³µì„ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'êµí™©': 'ì˜ì  ì§€í˜œì™€ ì „í†µì˜ ê°€ë¥´ì¹¨ì„ ìƒì§•í•©ë‹ˆë‹¤. ì§€í˜œë¡œìš´ ìŠ¤ìŠ¹ì˜ ê°€ë¥´ì¹¨ì„ ë°›ì•„ë“¤ì´ê³ , ì „í†µì  ê°€ì¹˜ê´€ì„ ì¡´ì¤‘í•˜ì„¸ìš”. êµìœ¡ê³¼ í•™ìŠµì„ í†µí•´ ë” ë†’ì€ ì°¨ì›ì˜ ê¹¨ë‹¬ìŒì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì—°ì¸': 'ì‚¬ë‘ê³¼ ì¡°í™”, ê·¸ë¦¬ê³  ì¤‘ìš”í•œ ì„ íƒì˜ ìˆœê°„ì…ë‹ˆë‹¤. ì§„ì •í•œ ê°€ì¹˜ì— ë”°ë¼ ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”. ê´€ê³„ì—ì„œ ì¡°í™”ë¥¼ ì°¾ê³ , ë§ˆìŒì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”. ì„ íƒì˜ ê²°ê³¼ê°€ ë‹¹ì‹ ì˜ ìš´ëª…ì„ ê²°ì •í•©ë‹ˆë‹¤.',
      'ì „ì°¨': 'ê°•í•œ ì˜ì§€ë ¥ê³¼ ìŠ¹ë¦¬ì˜ ìƒì§•ì…ë‹ˆë‹¤. ëª¨ë“  ì¥ì• ë¬¼ì„ ê·¹ë³µí•˜ê³  ëª©í‘œë¥¼ í–¥í•´ ì „ì§„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ê³  ëŠì„ì—†ì´ ë‚˜ì•„ê°€ì„¸ìš”. ìŠ¹ë¦¬ëŠ” ì´ë¯¸ ë‹¹ì‹ ì˜ ê²ƒì…ë‹ˆë‹¤.',
      'í˜': 'ë‚´ë©´ì˜ ê°•í•¨ê³¼ ë¶€ë“œëŸ¬ìš´ í˜ì˜ ì¡°í™”ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. í­ë ¥ì´ ì•„ë‹Œ ë¶€ë“œëŸ¬ìš´ í˜ìœ¼ë¡œ ì–´ë ¤ì›€ì„ ê·¹ë³µí•˜ì„¸ìš”. ìš©ê¸°ì™€ ì¸ë‚´, ê·¸ë¦¬ê³  ë‚´ë©´ì˜ í‰í™”ê°€ ë‹¹ì‹ ì„ ì´ëŒ ê²ƒì…ë‹ˆë‹¤.',
      'ì€ë‘”ì': 'ê³ ë…ì„ í†µí•œ ë‚´ë©´ íƒêµ¬ì™€ ì§€í˜œì˜ ìƒì§•ì…ë‹ˆë‹¤. ì™¸ë¶€ì˜ ì†ŒìŒì—ì„œ ë²—ì–´ë‚˜ ìì‹ ì˜ ë‚´ë©´ì„ ë“¤ì—¬ë‹¤ë³´ì„¸ìš”. ê³ ë…í•œ ì‹œê°„ì„ í†µí•´ ì§„ì •í•œ ì§€í˜œë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´': 'ë³€í™”ì™€ ìš´ëª…ì˜ ìˆœí™˜ì„ ìƒì§•í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì´ ëŠì„ì—†ì´ ë³€í™”í•˜ëŠ” ìš°ì£¼ì˜ ë²•ì¹™ì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ìƒˆë¡œìš´ ê¸°íšŒê°€ ë‹¤ê°€ì˜¤ê³  ìˆìœ¼ë©°, ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.',
      'ì •ì˜': 'ê· í˜•ê³¼ ê³µì •, ê·¸ë¦¬ê³  ì§„ì‹¤ì˜ ìƒì§•ì…ë‹ˆë‹¤. ëª¨ë“  ìƒí™©ì—ì„œ ê³µì •í•˜ê³  ê· í˜•ì¡íŒ íŒë‹¨ì„ í•˜ì„¸ìš”. ì§„ì‹¤ì„ ì¶”êµ¬í•˜ê³ , ìì‹ ì˜ í–‰ë™ì— ì±…ì„ì„ ì§€ì„¸ìš”.',
      'ë§¤ë‹¬ë¦° ì‚¬ëŒ': 'ìƒˆë¡œìš´ ê´€ì ê³¼ í¬ìƒì„ í†µí•œ ê¹¨ë‹¬ìŒì„ ìƒì§•í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ ê´€ì ì„ ë²„ë¦¬ê³  ë‹¤ë¥¸ ì‹œê°ìœ¼ë¡œ ìƒí™©ì„ ë°”ë¼ë³´ì„¸ìš”. ë•Œë¡œëŠ” í¬ìƒì„ í†µí•´ ë” í° ê¹¨ë‹¬ìŒì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì£½ìŒ': 'ë³€í™”ì™€ ì¬ìƒ, ìƒˆë¡œìš´ ì‹œì‘ì„ ìƒì§•í•©ë‹ˆë‹¤. ê³¼ê±°ë¥¼ ì™„ì „íˆ ë²„ë¦¬ê³  ìƒˆë¡œìš´ ê²ƒì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ëì€ ìƒˆë¡œìš´ ì‹œì‘ì´ë©°, ë³€í™”ë¥¼ í†µí•´ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì ˆì œ': 'ê· í˜•ê³¼ ì¡°í™”, ê·¸ë¦¬ê³  ì¹˜ìœ ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì—ì„œ ê· í˜•ì„ ì°¾ê³  ì¡°í™”ë¥¼ ì´ë£¨ì„¸ìš”. ì¸ë‚´ì™€ ì¹˜ìœ ë¥¼ í†µí•´ ì™„ì „í•¨ì— ë„ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì•…ë§ˆ': 'ë¬¼ì§ˆì  ì†ë°•ê³¼ ìœ í˜¹ì„ ìƒì§•í•©ë‹ˆë‹¤. ë¬¼ì§ˆì  ìš•ë§ì— ì–½ë§¤ì´ì§€ ë§ê³  ì§„ì •í•œ ììœ ë¥¼ ì°¾ìœ¼ì„¸ìš”. ìì‹ ì˜ ì•½ì ì„ ì¸ì •í•˜ê³  ê·¹ë³µí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
      'íƒ‘': 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”ì™€ ê³„ì‹œë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ êµ¬ì¡°ê°€ ë¬´ë„ˆì§€ê³  ìƒˆë¡œìš´ ê¹¨ë‹¬ìŒì´ ì°¾ì•„ì˜µë‹ˆë‹¤. íŒŒê´´ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ êµ¬ì¡°ë¥¼ ë§Œë“œì„¸ìš”.',
      'ë³„': 'í¬ë§ê³¼ ì¹˜ìœ , ê·¸ë¦¬ê³  ì˜ê°ì„ ìƒì§•í•©ë‹ˆë‹¤. ì–´ë‘  ì†ì—ì„œë„ í¬ë§ì˜ ë¹›ì„ ë¯¿ìœ¼ì„¸ìš”. ì¹˜ìœ ì˜ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìœ¼ë©°, ì˜ê°ì„ í†µí•´ ìƒˆë¡œìš´ ê¸¸ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ë‹¬': 'ì§ê°ê³¼ ì‹ ë¹„, ê·¸ë¦¬ê³  ì ì¬ì˜ì‹ì˜ ìƒì§•ì…ë‹ˆë‹¤. ì§ê°ì„ ë¯¿ê³  ì‹ ë¹„ë¡œìš´ í†µì°°ë ¥ì„ í™œìš©í•˜ì„¸ìš”. ì ì¬ì˜ì‹ì˜ ë©”ì‹œì§€ë¥¼ ë°›ì•„ë“¤ì´ê³ , í™˜ìƒê³¼ í˜„ì‹¤ì˜ ê²½ê³„ë¥¼ ì´í•´í•˜ì„¸ìš”.',
      'íƒœì–‘': 'ì„±ê³µê³¼ í–‰ë³µ, ê·¸ë¦¬ê³  í™œë ¥ì˜ ìƒì§•ì…ë‹ˆë‹¤. ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤. ì„±ê³µê³¼ í–‰ë³µì´ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë©°, í™œë ¥ê³¼ ì§„ì‹¤ì„ ì°¾ìœ¼ì„¸ìš”.',
      'ì‹¬íŒ': 'ë¶€í™œê³¼ ê°ì„±, ê·¸ë¦¬ê³  ìƒˆë¡œìš´ ì†Œëª…ì„ ìƒì§•í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‚¶ê³¼ ì†Œëª…ì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ê°ì„±ì˜ ì‹œê¸°ê°€ ì™”ìœ¼ë©°, ë” ë†’ì€ ì°¨ì›ì˜ ì‚¶ìœ¼ë¡œ ë‚˜ì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì„¸ê³„': 'ì™„ì„±ê³¼ ì„±ì·¨, ê·¸ë¦¬ê³  í†µí•©ì„ ìƒì§•í•©ë‹ˆë‹¤. ì—¬ì •ì˜ ì™„ì„±ì„ ì¶•í•˜í•˜ì„¸ìš”. ëª¨ë“  ê²ƒì´ ì¡°í™”ë¡­ê²Œ í†µí•©ë˜ì–´ ì™„ì „í•œ ì„±ì·¨ë¥¼ ì´ë£¨ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì—¬ì •ì˜ ì‹œì‘ì´ê¸°ë„ í•©ë‹ˆë‹¤.'
    };
    
    return meanings[card.name] || `${card.name}ì€(ëŠ”) ${card.keywords.join(', ')}ì„(ë¥¼) ìƒì§•í•˜ë©°, í˜„ì¬ ìƒí™©ì—ì„œ ì¤‘ìš”í•œ ì˜ë¯¸ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.`;
  }

  getReversedMeaning(card) {
    const meanings = {
      'ë°”ë³´': 'ì„±ê¸‰í•œ íŒë‹¨ê³¼ ë¬´ëª¨í•œ í–‰ë™ìœ¼ë¡œ ì¸í•œ ìœ„í—˜ì„ ê²½ê³ í•©ë‹ˆë‹¤. ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ì•Šë„ë¡ ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•˜ì„¸ìš”. ë¬´ì§€í•¨ì´ ì˜¤íˆë ¤ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.',
      'ë§ˆë²•ì‚¬': 'ì˜ì§€ë ¥ ë¶€ì¡±ê³¼ ê¸°íšŒ ë†“ì¹¨ìœ¼ë¡œ ì¸í•œ ì¢Œì ˆì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¶€ì •ì  ì‚¬ê³ ë¥¼ ë²„ë¦¬ê³  ìì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ìœ¼ì„¸ìš”. ì ì¬ë ¥ì´ ì œëŒ€ë¡œ ë°œíœ˜ë˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
      'ì—¬ì‚¬ì œ': 'ì§ê°ì„ ë¬´ì‹œí•˜ê³  í‘œë©´ì  ì‚¬ê³ ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‚´ë©´ì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ê³  ê¹Šì€ í†µì°°ì„ ì°¾ìœ¼ì„¸ìš”. ì˜ì  ì§€í˜œê°€ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
      'ì—¬í™©ì œ': 'ì°½ì¡°ë ¥ ë¶€ì¡±ê³¼ ìì—°ê³¼ì˜ ë‹¨ì ˆë¡œ ì¸í•œ ê³ ë¦½ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì°½ì¡°ì  ì—ë„ˆì§€ë¥¼ ë˜ì°¾ê³  ìì—°ê³¼ì˜ ì—°ê²°ì„ íšŒë³µí•˜ì„¸ìš”. í’ìš”ë¡œì›€ì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
      'í™©ì œ': 'ê¶Œìœ„ ë¶€ì¡±ê³¼ ë¶ˆì•ˆì •ìœ¼ë¡œ ì¸í•œ í˜¼ë€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ê°•í™”í•˜ê³  ì•ˆì •ì„ ì°¾ìœ¼ì„¸ìš”. ì²´ê³„ì  ì ‘ê·¼ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.',
      'êµí™©': 'ì „í†µì— ëŒ€í•œ ë°˜ë°œê³¼ êµìœ¡ì˜ ê±°ë¶€ë¡œ ì¸í•œ í˜¼ë€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë°°ì›€ì˜ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ê³  ì§€í˜œë¡œìš´ ê°€ë¥´ì¹¨ì„ ë°›ì•„ë“¤ì´ì„¸ìš”.',
      'ì—°ì¸': 'ë¶ˆí™”ì™€ ì˜ëª»ëœ ì„ íƒìœ¼ë¡œ ì¸í•œ ê°ˆë“±ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê´€ê³„ì—ì„œ ì¡°í™”ë¥¼ ì°¾ê³  ì§„ì •í•œ ê°€ì¹˜ì— ë”°ë¼ ê²°ì •í•˜ì„¸ìš”. ì„ íƒì˜ ì‹¤ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì „ì°¨': 'ì˜ì§€ ë¶€ì¡±ê³¼ íŒ¨ë°°ë¡œ ì¸í•œ ì¢Œì ˆì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëª©í‘œë¥¼ í–¥í•œ ì˜ì§€ë¥¼ ê°•í™”í•˜ê³  ì¥ì• ë¬¼ì„ ê·¹ë³µí•˜ì„¸ìš”. ìŠ¹ë¦¬ì— ëŒ€í•œ ë‘ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤.',
      'í˜': 'ë‚´ë©´ì˜ ì•½í•¨ê³¼ ë‘ë ¤ì›€ìœ¼ë¡œ ì¸í•œ ë¬´ë ¥ê°ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìš©ê¸°ë¥¼ ë‚´ì–´ ì–´ë ¤ì›€ì— ë§ì„œê³  ë‚´ë©´ì˜ ê°•í•¨ì„ ë¯¿ìœ¼ì„¸ìš”.',
      'ì€ë‘”ì': 'ê³¼ë„í•œ ê³ ë…ê³¼ ë°©í–¥ ìƒì‹¤ë¡œ ì¸í•œ ì™¸ë¡œì›€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì™¸ë¡œì›€ì„ ê·¹ë³µí•˜ê³  ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ì˜ ì—°ê²°ì„ ì°¾ìœ¼ì„¸ìš”.',
      'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´': 'ë¶€ì •ì ì¸ ë³€í™”ì™€ ê¸°íšŒ ë†“ì¹¨ìœ¼ë¡œ ì¸í•œ í›„íšŒë¥¼ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì°¾ìœ¼ì„¸ìš”.',
      'ì •ì˜': 'ë¶€ì •í•œ íŒë‹¨ê³¼ ë¶ˆê· í˜•ìœ¼ë¡œ ì¸í•œ í˜¼ë€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê³µì •í•¨ì„ ì°¾ê³  ê· í˜•ì„ íšŒë³µí•˜ì„¸ìš”. í¸í–¥ëœ ì‹œê°ì´ ë¬¸ì œì…ë‹ˆë‹¤.',
      'ë§¤ë‹¬ë¦° ì‚¬ëŒ': 'ë¬´ì˜ë¯¸í•œ í¬ìƒê³¼ ì‹œê°„ ë‚­ë¹„ë¡œ ì¸í•œ í›„íšŒë¥¼ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. íš¨ìœ¨ì ìœ¼ë¡œ ì‹œê°„ì„ ì‚¬ìš©í•˜ê³  ì˜ë¯¸ ìˆëŠ” ì„ íƒì„ í•˜ì„¸ìš”.',
      'ì£½ìŒ': 'ë³€í™” ê±°ë¶€ì™€ ê³¼ê±°ì— ë§¤ë‹¬ë¦¼ìœ¼ë¡œ ì¸í•œ ì •ì²´ë¥¼ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ í•˜ì„¸ìš”.',
      'ì ˆì œ': 'ë¶ˆê· í˜•ê³¼ ì¡°í™” ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ í˜¼ë€ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê· í˜•ì„ ì°¾ê³  ì¡°í™”ë¥¼ ì´ë£¨ì„¸ìš”. ê³¼ë„í•¨ì´ ë¬¸ì œì…ë‹ˆë‹¤.',
      'ì•…ë§ˆ': 'ì†ë°•ì—ì„œ í•´ë°©ê³¼ ê¹¨ë‹¬ìŒì„ í†µí•´ ììœ ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ì§ˆì  ìš•ë§ì—ì„œ ë²—ì–´ë‚˜ ì§„ì •í•œ ììœ ë¥¼ ì¶”êµ¬í•˜ì„¸ìš”.',
      'íƒ‘': 'íŒŒê´´ íšŒí”¼ì™€ ì ì§„ì  ë³€í™”ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ ë³€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸‰ê²©í•œ ë³€í™” ëŒ€ì‹  ì ì§„ì  ê°œì„ ì„ ì¶”êµ¬í•˜ì„¸ìš”.',
      'ë³„': 'í¬ë§ ìƒì‹¤ê³¼ ì ˆë§ìœ¼ë¡œ ì¸í•œ ì–´ë‘ ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. í¬ë§ì„ ë˜ì°¾ê³  ë¹›ì„ ì°¾ìœ¼ì„¸ìš”. ì˜ê°ì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.',
      'ë‹¬': 'í™˜ìƒê³¼ ë‘ë ¤ì›€, í˜¼ë€ìœ¼ë¡œ ì¸í•œ ë¶ˆì•ˆì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì‹¤ì„ ì§ì‹œí•˜ê³  í™˜ìƒì—ì„œ ë²—ì–´ë‚˜ì„¸ìš”.',
      'íƒœì–‘': 'ì¼ì‹œì  ì–´ë ¤ì›€ê³¼ ê³¼ì‹ ìœ¼ë¡œ ì¸í•œ ì‹¤íŒ¨ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²¸ì†í•˜ê²Œ ì ‘ê·¼í•˜ê³  ì–´ë ¤ì›€ì„ ê·¹ë³µí•˜ì„¸ìš”.',
      'ì‹¬íŒ': 'ê°ì„± ê±°ë¶€ì™€ ë³€í™” ê±°ë¶€ë¡œ ì¸í•œ ì •ì²´ë¥¼ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¹¨ë‹¬ìŒì„ ë°›ì•„ë“¤ì´ê³  ë³€í™”ë¥¼ ê±°ë¶€í•˜ì§€ ë§ˆì„¸ìš”.',
      'ì„¸ê³„': 'ë¯¸ì™„ì„±ê³¼ ë¶ˆì™„ì „í•¨ìœ¼ë¡œ ì¸í•œ ë¶ˆë§Œì¡±ì„ ê²½í—˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì™„ì„±ì„ ìœ„í•´ ë…¸ë ¥í•˜ê³  ë¶ˆì™„ì „í•¨ì„ ê·¹ë³µí•˜ì„¸ìš”.'
    };
    
    return meanings[card.name] || `${card.name}ì˜ ì—­ë°©í–¥ì€ ${card.keywords.join(', ')}ì˜ ë¶€ì¡±ì„ ì˜ë¯¸í•˜ë©°, í˜„ì¬ ìƒí™©ì—ì„œ ì£¼ì˜ê°€ í•„ìš”í•œ ë¶€ë¶„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.`;
  }

  getUprightAdvice(card) {
    const advice = {
      'ë°”ë³´': 'ìˆœìˆ˜í•œ ë§ˆìŒìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”. ë‘ë ¤ì›€ ì—†ì´ ë¯¸ì§€ì˜ ì„¸ê³„ë¡œ ë°œì„ ë‚´ë”›ê³ , ëª¨ë“  ê²½í—˜ì„ ì„±ì¥ì˜ ê¸°íšŒë¡œ ì‚¼ìœ¼ì„¸ìš”. ë¬´ì§€í•¨ì´ ì˜¤íˆë ¤ ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ì—´ì–´ì¤ë‹ˆë‹¤.',
      'ë§ˆë²•ì‚¬': 'ìì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ê³  ì°½ì˜ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì„¸ìš”. ì˜ì§€ë ¥ì´ ì„±ê³µì˜ ì—´ì‡ ì´ë©°, ìš°ì£¼ì˜ ëª¨ë“  ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ë•ê³  ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ëª¨ë“  ê²ƒì„ í˜„ì‹¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.',
      'ì—¬ì‚¬ì œ': 'ì§ê°ì„ ë¯¿ê³  ë‚´ë©´ì˜ ì§€í˜œë¥¼ í™œìš©í•˜ì„¸ìš”. ëª…ìƒì´ë‚˜ ìê¸° ì„±ì°°ì„ í†µí•´ ìˆ¨ê²¨ì§„ ì§„ì‹¤ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜í˜¼ ê¹Šì€ ê³³ì—ì„œ ì˜¤ëŠ” í†µì°°ì„ ë°›ì•„ë“¤ì´ì„¸ìš”.',
      'ì—¬í™©ì œ': 'ì°½ì¡°ì  ì—ë„ˆì§€ë¥¼ ììœ ë¡­ê²Œ í‘œí˜„í•˜ì„¸ìš”. ìì—°ê³¼ì˜ ì—°ê²°ì„ í†µí•´ ì˜ê°ì„ ì–»ê³ , í’ìš”ë¡œìš´ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤. ì°½ì¡°ì  í™œë™ê³¼ ì„±ì¥ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.',
      'í™©ì œ': 'ê°•ë ¥í•œ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ê³  ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì„¸ìš”. ì•ˆì •ê³¼ êµ¬ì¡°ê°€ ì¤‘ìš”í•˜ë©°, ê¶Œìœ„ì™€ ì±…ì„ê°ì„ ê°€ì§€ê³  ìƒí™©ì„ ì£¼ë„í•˜ì„¸ìš”. í™•ê³ í•œ ê¸°ë°˜ ìœ„ì—ì„œ ì„±ê³µì„ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'êµí™©': 'ì „í†µì ì¸ ë°©ë²•ê³¼ ì§€í˜œë¡œìš´ ìŠ¤ìŠ¹ì˜ ê°€ë¥´ì¹¨ì„ ë°›ì•„ë“¤ì´ì„¸ìš”. êµìœ¡ê³¼ í•™ìŠµì„ í†µí•´ ë” ë†’ì€ ì°¨ì›ì˜ ê¹¨ë‹¬ìŒì„ ì–»ì„ ìˆ˜ ìˆìœ¼ë©°, ì˜ì  ì§€í˜œê°€ ë‹¹ì‹ ì„ ì´ëŒ ê²ƒì…ë‹ˆë‹¤.',
      'ì—°ì¸': 'ì§„ì •í•œ ê°€ì¹˜ì— ë”°ë¼ ì„ íƒí•˜ì„¸ìš”. ì‚¬ë‘ê³¼ ì¡°í™”ë¥¼ ìš°ì„ ì‹œí•˜ê³ , ë§ˆìŒì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”. ì„ íƒì˜ ê²°ê³¼ê°€ ë‹¹ì‹ ì˜ ìš´ëª…ì„ ê²°ì •í•˜ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•˜ì„¸ìš”.',
      'ì „ì°¨': 'ëª©í‘œë¥¼ í–¥í•´ ëŠì„ì—†ì´ ì „ì§„í•˜ì„¸ìš”. ì˜ì§€ë ¥ìœ¼ë¡œ ëª¨ë“  ì¥ì• ë¬¼ì„ ê·¹ë³µí•  ìˆ˜ ìˆìœ¼ë©°, ìŠ¹ë¦¬ëŠ” ì´ë¯¸ ë‹¹ì‹ ì˜ ê²ƒì…ë‹ˆë‹¤. ìì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ê³  ë‚˜ì•„ê°€ì„¸ìš”.',
      'í˜': 'ë¶€ë“œëŸ¬ìš´ í˜ìœ¼ë¡œ ì–´ë ¤ì›€ì„ ê·¹ë³µí•˜ì„¸ìš”. ìš©ê¸°ì™€ ì¸ë‚´, ê·¸ë¦¬ê³  ë‚´ë©´ì˜ í‰í™”ê°€ ë‹¹ì‹ ì„ ì´ëŒ ê²ƒì…ë‹ˆë‹¤. í­ë ¥ì´ ì•„ë‹Œ ë¶€ë“œëŸ¬ìš´ í˜ìœ¼ë¡œ ëª¨ë“  ê²ƒì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì€ë‘”ì': 'ê³ ë…í•œ ì‹œê°„ì„ í†µí•´ ì§„ì •í•œ ì§€í˜œë¥¼ ì–»ìœ¼ì„¸ìš”. ë‚´ë©´ íƒêµ¬ê°€ ì¤‘ìš”í•˜ë©°, ì™¸ë¶€ì˜ ì†ŒìŒì—ì„œ ë²—ì–´ë‚˜ ìì‹ ì˜ ë‚´ë©´ì„ ë“¤ì—¬ë‹¤ë³´ì„¸ìš”. ê³ ë…ì´ ì§€í˜œë¥¼ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤.',
      'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´': 'ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì¡ìœ¼ì„¸ìš”. ëª¨ë“  ê²ƒì´ ëŠì„ì—†ì´ ë³€í™”í•˜ëŠ” ìš°ì£¼ì˜ ë²•ì¹™ì„ ì´í•´í•˜ê³ , ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”. ìƒˆë¡œìš´ ê¸°íšŒê°€ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.',
      'ì •ì˜': 'ê³µì •í•˜ê³  ê· í˜•ì¡íŒ íŒë‹¨ì„ í•˜ì„¸ìš”. ì§„ì‹¤ì„ ì¶”êµ¬í•˜ê³ , ëª¨ë“  ìƒí™©ì—ì„œ ê³µì •í•¨ì„ ìœ ì§€í•˜ì„¸ìš”. ìì‹ ì˜ í–‰ë™ì— ì±…ì„ì„ ì§€ê³  ì˜¬ë°”ë¥¸ ì„ íƒì„ í•˜ì„¸ìš”.',
      'ë§¤ë‹¬ë¦° ì‚¬ëŒ': 'ìƒˆë¡œìš´ ê´€ì ìœ¼ë¡œ ìƒí™©ì„ ë°”ë¼ë³´ì„¸ìš”. ê¸°ì¡´ì˜ ê´€ì ì„ ë²„ë¦¬ê³  ë‹¤ë¥¸ ì‹œê°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” í¬ìƒì„ í†µí•´ ë” í° ê¹¨ë‹¬ìŒì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì£½ìŒ': 'í° ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ í•˜ì„¸ìš”. ê³¼ê±°ë¥¼ ì™„ì „íˆ ë²„ë¦¬ê³  ìƒˆë¡œìš´ ê²ƒì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ëì€ ìƒˆë¡œìš´ ì‹œì‘ì´ë©°, ë³€í™”ë¥¼ í†µí•´ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì ˆì œ': 'ê· í˜•ê³¼ ì¡°í™”ë¥¼ ì°¾ìœ¼ì„¸ìš”. ì¸ë‚´ì™€ ì¹˜ìœ ë¥¼ í†µí•´ ì™„ì „í•¨ì— ë„ë‹¬í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“  ê²ƒì—ì„œ ê· í˜•ì„ ì°¾ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
      'ì•…ë§ˆ': 'ë¬¼ì§ˆì  ì†ë°•ì—ì„œ ë²—ì–´ë‚˜ ì§„ì •í•œ ììœ ë¥¼ ì°¾ìœ¼ì„¸ìš”. ìì‹ ì˜ ì•½ì ì„ ì¸ì •í•˜ê³  ê·¹ë³µí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë©°, ë¬¼ì§ˆì  ìš•ë§ì— ì–½ë§¤ì´ì§€ ë§ˆì„¸ìš”.',
      'íƒ‘': 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ êµ¬ì¡°ë¥¼ ë§Œë“œì„¸ìš”. ê¸°ì¡´ì˜ êµ¬ì¡°ê°€ ë¬´ë„ˆì§€ê³  ìƒˆë¡œìš´ ê¹¨ë‹¬ìŒì´ ì°¾ì•„ì˜µë‹ˆë‹¤. íŒŒê´´ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ ê²ƒì„ ë§Œë“œì„¸ìš”.',
      'ë³„': 'í¬ë§ì„ ìƒì§€ ë§ˆì„¸ìš”. ì¹˜ìœ ì™€ ì˜ê°ì˜ ì—ë„ˆì§€ë¥¼ ë°›ê³ , ì–´ë‘  ì†ì—ì„œë„ í¬ë§ì˜ ë¹›ì„ ë¯¿ìœ¼ì„¸ìš”. ì˜ê°ì„ í†µí•´ ìƒˆë¡œìš´ ê¸¸ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ë‹¬': 'ì§ê°ì„ ë¯¿ê³  ì‹ ë¹„ë¡œìš´ í†µì°°ë ¥ì„ í™œìš©í•˜ì„¸ìš”. ì ì¬ì˜ì‹ì˜ ë©”ì‹œì§€ë¥¼ ë°›ì•„ë“¤ì´ê³ , í™˜ìƒê³¼ í˜„ì‹¤ì˜ ê²½ê³„ë¥¼ ì´í•´í•˜ì„¸ìš”. ì‹ ë¹„ë¡œìš´ í†µì°°ì´ ë‹¹ì‹ ì„ ì´ëŒ ê²ƒì…ë‹ˆë‹¤.',
      'íƒœì–‘': 'ì„±ê³µê³¼ í–‰ë³µì„ ë¯¿ìœ¼ì„¸ìš”. í™œë ¥ê³¼ ì§„ì‹¤ì„ ì°¾ê³ , ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤. ì„±ê³µê³¼ í–‰ë³µì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.',
      'ì‹¬íŒ': 'ìƒˆë¡œìš´ ì‚¶ê³¼ ì†Œëª…ì„ ë°›ì•„ë“¤ì´ì„¸ìš”. ê°ì„±ì˜ ì‹œê¸°ê°€ ì™”ìœ¼ë©°, ë” ë†’ì€ ì°¨ì›ì˜ ì‚¶ìœ¼ë¡œ ë‚˜ì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€í™œê³¼ ê°ì„±ì„ í†µí•´ ìƒˆë¡œìš´ ì†Œëª…ì„ ë°œê²¬í•˜ì„¸ìš”.',
      'ì„¸ê³„': 'ì™„ì„±ê³¼ ì„±ì·¨ë¥¼ ì¶•í•˜í•˜ì„¸ìš”. ëª¨ë“  ê²ƒì´ ì¡°í™”ë¡­ê²Œ í†µí•©ë˜ì–´ ì™„ì „í•œ ì„±ì·¨ë¥¼ ì´ë£¨ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì—¬ì •ì˜ ì‹œì‘ì´ê¸°ë„ í•˜ë‹ˆ ìƒˆë¡œìš´ ë„ì „ì„ ì¤€ë¹„í•˜ì„¸ìš”.'
    };
    
    return advice[card.name] || `${card.name}ì˜ ê¸ì •ì  ì—ë„ˆì§€ë¥¼ í™œìš©í•˜ì—¬ í˜„ì¬ ìƒí™©ì„ ê°œì„ í•˜ê³ , ì¹´ë“œì˜ ë©”ì‹œì§€ë¥¼ ì‹¤ìƒí™œì— ì ìš©í•´ë³´ì„¸ìš”.`;
  }

  getReversedAdvice(card) {
    const advice = {
      'ë°”ë³´': 'ì„±ê¸‰í•œ íŒë‹¨ì„ í”¼í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•˜ì„¸ìš”. ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.',
      'ë§ˆë²•ì‚¬': 'ì˜ì§€ë ¥ì„ ê°•í™”í•˜ê³  ë¶€ì •ì  ì‚¬ê³ ë¥¼ ë²„ë¦¬ì„¸ìš”. ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.',
      'ì—¬ì‚¬ì œ': 'ì§ê°ì„ ë¬´ì‹œí•˜ì§€ ë§ê³  ë‚´ë©´ì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”.',
      'ì—¬í™©ì œ': 'ì°½ì¡°ì  ì—ë„ˆì§€ë¥¼ ë˜ì°¾ìœ¼ì„¸ìš”. ìì—°ê³¼ì˜ ì—°ê²°ì„ íšŒë³µí•˜ì„¸ìš”.',
      'í™©ì œ': 'ë¦¬ë”ì‹­ì„ ê°•í™”í•˜ê³  ì•ˆì •ì„ ì°¾ìœ¼ì„¸ìš”. ì²´ê³„ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.',
      'êµí™©': 'ì „í†µê³¼ êµìœ¡ì˜ ê°€ì¹˜ë¥¼ ì¸ì •í•˜ì„¸ìš”. ë°°ì›€ì˜ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.',
      'ì—°ì¸': 'ê°ˆë“±ì„ í•´ê²°í•˜ê³  ì¡°í™”ë¥¼ ì°¾ìœ¼ì„¸ìš”. ì˜ëª»ëœ ì„ íƒì„ í”¼í•˜ì„¸ìš”.',
      'ì „ì°¨': 'ì˜ì§€ë¥¼ ê°•í™”í•˜ê³  ëª©í‘œë¥¼ í–¥í•´ ì „ì§„í•˜ì„¸ìš”. íŒ¨ë°°ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.',
      'í˜': 'ìš©ê¸°ë¥¼ ë‚´ì–´ ì–´ë ¤ì›€ì— ë§ì„œì„¸ìš”. ë‚´ë©´ì˜ ê°•í•¨ì„ ë¯¿ìœ¼ì„¸ìš”.',
      'ì€ë‘”ì': 'ê³¼ë„í•œ ê³ ë…ì„ í”¼í•˜ê³  ì™¸ë¡œì›€ì„ ê·¹ë³µí•˜ì„¸ìš”.',
      'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´': 'ë¶€ì •ì ì¸ ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì°¾ìœ¼ì„¸ìš”.',
      'ì •ì˜': 'ê³µì •í•¨ì„ ì°¾ê³  ë¶ˆê· í˜•ì„ í•´ê²°í•˜ì„¸ìš”.',
      'ë§¤ë‹¬ë¦° ì‚¬ëŒ': 'ë¬´ì˜ë¯¸í•œ í¬ìƒì„ í”¼í•˜ê³  ì‹œê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.',
      'ì£½ìŒ': 'ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ê³¼ê±°ì— ë§¤ë‹¬ë¦¬ì§€ ë§ˆì„¸ìš”.',
      'ì ˆì œ': 'ê· í˜•ì„ ì°¾ê³  ì¡°í™”ë¥¼ ì´ë£¨ì„¸ìš”.',
      'ì•…ë§ˆ': 'ì†ë°•ì—ì„œ í•´ë°©ë˜ê³  ì§„ì •í•œ ììœ ë¥¼ ì°¾ìœ¼ì„¸ìš”.',
      'íƒ‘': 'íŒŒê´´ë¥¼ í”¼í•˜ê³  ì ì§„ì  ë³€í™”ë¥¼ ì¶”êµ¬í•˜ì„¸ìš”.',
      'ë³„': 'í¬ë§ì„ ë˜ì°¾ê³  ì ˆë§ì„ ê·¹ë³µí•˜ì„¸ìš”.',
      'ë‹¬': 'í™˜ìƒì„ ë²„ë¦¬ê³  í˜„ì‹¤ì„ ì§ì‹œí•˜ì„¸ìš”.',
      'íƒœì–‘': 'ê³¼ì‹ ì„ í”¼í•˜ê³  ê²¸ì†í•˜ê²Œ ì ‘ê·¼í•˜ì„¸ìš”.',
      'ì‹¬íŒ': 'ê°ì„±ì„ ë°›ì•„ë“¤ì´ê³  ë³€í™”ë¥¼ ê±°ë¶€í•˜ì§€ ë§ˆì„¸ìš”.',
      'ì„¸ê³„': 'ì™„ì„±ì„ ìœ„í•´ ë…¸ë ¥í•˜ê³  ë¶ˆì™„ì „í•¨ì„ ê·¹ë³µí•˜ì„¸ìš”.'
    };
    
    return advice[card.name] || `${card.name}ì˜ ë¶€ì •ì  ì—ë„ˆì§€ë¥¼ ê·¹ë³µí•˜ê³  ê¸ì •ì  ë°©í–¥ìœ¼ë¡œ ì „í™˜í•˜ì„¸ìš”.`;
  }

  getOverallInterpretation(cards, question) {
    const uprightCount = cards.filter(c => c.orientation === 'upright').length;
    const reversedCount = cards.filter(c => c.orientation === 'reversed').length;
    
    let overall = '';
    
    if (uprightCount > reversedCount) {
      overall += '**ì „ì²´ì ìœ¼ë¡œ ê¸ì •ì ì¸ ì—ë„ˆì§€**ê°€ íë¥´ê³  ìˆìŠµë‹ˆë‹¤. ';
      overall += 'í˜„ì¬ ìƒí™©ì—ì„œ í¬ë§ê³¼ ê°€ëŠ¥ì„±ì„ ì°¾ì„ ìˆ˜ ìˆìœ¼ë©°, ';
      overall += 'ì ê·¹ì ì¸ í–‰ë™ê³¼ ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì´ ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.\n\n';
    } else if (reversedCount > uprightCount) {
      overall += '**ë„ì „ê³¼ ì–´ë ¤ì›€**ì´ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ';
      overall += 'í˜„ì¬ ìƒí™©ì„ ì¬ê²€í† í•˜ê³  ìƒˆë¡œìš´ ì ‘ê·¼ë²•ì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ';
      overall += 'ì¸ë‚´ì™€ ì§€í˜œë¡œ ì–´ë ¤ì›€ì„ ê·¹ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n';
    } else {
      overall += '**ê· í˜•ê³¼ ì¡°í™”**ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ';
      overall += 'ìƒí™©ì„ ê°ê´€ì ìœ¼ë¡œ ë°”ë¼ë³´ê³  ê· í˜•ì¡íŒ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\n';
    }
    
    overall += '**ì¡°ì–¸**: ì¹´ë“œì˜ ë©”ì‹œì§€ë¥¼ ì°¸ê³ í•˜ì—¬ í˜„ì¬ ìƒí™©ì—ì„œ ìµœì„ ì˜ ì„ íƒì„ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ';
    overall += 'íƒ€ë¡œëŠ” ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í˜„ì¬ ìƒí™©ì— ëŒ€í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤. ';
    overall += 'ìì‹ ì˜ ì§ê°ê³¼ íŒë‹¨ë ¥ì„ ë¯¿ê³  í–‰ë™í•˜ì„¸ìš”.\n\n';
    
    overall += '*ì´ í•´ì„ì€ ì°¸ê³ ìš©ì´ë©°, ìµœì¢… ê²°ì •ì€ ë³¸ì¸ì˜ íŒë‹¨ì— ë”°ë¼ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.*';
    
    return overall;
  }

  getAvailableSpreads() {
    return this.spreads;
  }

  getCardById(id) {
    return this.cards.find(card => card.id.toString() === id);
  }
}

module.exports = { TarotService };
