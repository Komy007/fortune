class TarotService {
  constructor() {
    this.cards = [];
    this.spreads = [];
    this.initializeCards();
    this.initializeSpreads();
  }

  initializeCards() {
    // 메이저 아르카나 22장
    const majorArcana = [
      { id: 0, name: '바보', suit: 'major', keywords: ['새로운 시작', '순수함', '모험'] },
      { id: 1, name: '마법사', suit: 'major', keywords: ['창의력', '의지력', '기술'] },
      { id: 2, name: '여사제', suit: 'major', keywords: ['직감', '지혜', '신비'] },
      { id: 3, name: '여황제', suit: 'major', keywords: ['풍요', '창조', '모성'] },
      { id: 4, name: '황제', suit: 'major', keywords: ['권력', '안정', '구조'] },
      { id: 5, name: '교황', suit: 'major', keywords: ['전통', '교육', '종교'] },
      { id: 6, name: '연인', suit: 'major', keywords: ['사랑', '선택', '조화'] },
      { id: 7, name: '전차', suit: 'major', keywords: ['승리', '의지', '통제'] },
      { id: 8, name: '힘', suit: 'major', keywords: ['내면의 힘', '용기', '인내'] },
      { id: 9, name: '은둔자', suit: 'major', keywords: ['고독', '내면 탐구', '지혜'] },
      { id: 10, name: '운명의 수레바퀴', suit: 'major', keywords: ['변화', '운명', '기회'] },
      { id: 11, name: '정의', suit: 'major', keywords: ['균형', '공정', '진실'] },
      { id: 12, name: '매달린 사람', suit: 'major', keywords: ['희생', '새로운 관점', '정지'] },
      { id: 13, name: '죽음', suit: 'major', keywords: ['변화', '끝', '새로운 시작'] },
      { id: 14, name: '절제', suit: 'major', keywords: ['균형', '조화', '인내'] },
      { id: 15, name: '악마', suit: 'major', keywords: ['속박', '유혹', '물질주의'] },
      { id: 16, name: '탑', suit: 'major', keywords: ['파괴', '갑작스러운 변화', '계시'] },
      { id: 17, name: '별', suit: 'major', keywords: ['희망', '치유', '영감'] },
      { id: 18, name: '달', suit: 'major', keywords: ['직감', '환상', '두려움'] },
      { id: 19, name: '태양', suit: 'major', keywords: ['성공', '행복', '활력'] },
      { id: 20, name: '심판', suit: 'major', keywords: ['부활', '각성', '변화'] },
      { id: 21, name: '세계', suit: 'major', keywords: ['완성', '성취', '통합'] }
    ];

    this.cards = majorArcana;
  }

  initializeSpreads() {
    this.spreads = [
      {
        id: 'single-card',
        name: '일일 타로',
        description: '오늘 하루를 위한 한 장의 카드',
        cardCount: 1,
        positions: [
          { id: 1, name: '오늘의 메시지', description: '오늘 하루를 위한 조언' }
        ]
      },
      {
        id: 'three-card',
        name: '3장 카드 점',
        description: '과거-현재-미래를 보는 기본적인 스프레드',
        cardCount: 3,
        positions: [
          { id: 1, name: '과거', description: '과거의 영향과 배경' },
          { id: 2, name: '현재', description: '현재 상황과 도전' },
          { id: 3, name: '미래', description: '앞으로의 가능성과 조언' }
        ]
      },
      {
        id: 'celtic-cross',
        name: '켈틱 크로스',
        description: '가장 상세한 10장 카드 스프레드',
        cardCount: 10,
        positions: [
          { id: 1, name: '현재 상황', description: '현재의 핵심 문제' },
          { id: 2, name: '도전', description: '직면한 도전과 장애' },
          { id: 3, name: '근본 원인', description: '문제의 근본 원인' },
          { id: 4, name: '과거', description: '과거의 영향' },
          { id: 5, name: '가능한 결과', description: '앞으로의 가능성' },
          { id: 6, name: '근처 미래', description: '곧 다가올 상황' },
          { id: 7, name: '자신', description: '자신의 태도와 감정' },
          { id: 8, name: '환경', description: '주변 환경과 영향' },
          { id: 9, name: '희망과 두려움', description: '희망과 두려움' },
          { id: 10, name: '결론', description: '최종 결과와 조언' }
        ]
      }
    ];
  }

  async drawCards(spreadId, question) {
    const spread = this.spreads.find(s => s.id === spreadId) || this.spreads[1];
    const drawnCards = [];
    const usedIds = new Set();

    for (let i = 0; i < spread.cardCount; i++) {
      let card;
      do {
        card = this.cards[Math.floor(Math.random() * this.cards.length)];
      } while (usedIds.has(card.id));
      
      usedIds.add(card.id);
      card.orientation = Math.random() > 0.5 ? 'upright' : 'reversed';
      card.position = spread.positions[i];
      drawnCards.push(card);
    }

    const interpretation = this.generateInterpretation(drawnCards, question, spread);

    return {
      id: Date.now().toString(),
      spread,
      cards: drawnCards,
      question,
      interpretation,
      timestamp: new Date().toISOString()
    };
  }

  generateInterpretation(cards, question, spread) {
    let interpretation = `# 🃏 타로 점 결과\n\n`;
    
    if (question) {
      interpretation += `**질문**: ${question}\n\n`;
    }
    
    interpretation += `**스프레드**: ${spread.name}\n`;
    interpretation += `**카드 수**: ${spread.cardCount}장\n`;
    interpretation += `**점성 시간**: ${new Date().toLocaleString('ko-KR')}\n\n`;
    
    interpretation += `## 🌟 카드 해석\n\n`;
    
    cards.forEach((card, index) => {
      const position = card.position;
      const orientation = card.orientation === 'upright' ? '정방향' : '역방향';
      const orientationEmoji = card.orientation === 'upright' ? '✨' : '🔄';
      
      interpretation += `### ${orientationEmoji} ${position?.name || `${index + 1}번째 카드`}\n`;
      interpretation += `**${card.name}** (${orientation})\n\n`;
      
      const keywords = card.keywords.join(', ');
      interpretation += `**핵심 키워드**: ${keywords}\n\n`;
      
      if (card.orientation === 'upright') {
        interpretation += `**정방향 의미**: ${this.getUprightMeaning(card)}\n\n`;
        interpretation += `**조언**: ${this.getUprightAdvice(card)}\n\n`;
      } else {
        interpretation += `**역방향 의미**: ${this.getReversedMeaning(card)}\n\n`;
        interpretation += `**주의사항**: ${this.getReversedAdvice(card)}\n\n`;
      }
      
      if (index < cards.length - 1) {
        interpretation += `---\n\n`;
      }
    });
    
    interpretation += `## 💫 전체 운세 해석\n\n`;
    interpretation += this.getOverallInterpretation(cards, question);
    
    return interpretation;
  }

  getUprightMeaning(card) {
    const meanings = {
      '바보': '순수한 영혼의 새로운 여정을 상징합니다. 무지함이 오히려 무한한 가능성을 열어주는 시기입니다. 두려움 없이 미지의 세계로 발을 내딛으세요. 모든 경험이 당신을 성장시킬 것입니다.',
      '마법사': '우주의 모든 에너지를 손에 쥐고 있는 강력한 창조자입니다. 의지력과 창의력이 절정에 달한 시기로, 원하는 모든 것을 현실로 만들 수 있는 능력이 있습니다. 자신의 잠재력을 믿고 행동하세요.',
      '여사제': '신비로운 내면의 지혜와 직감의 여신입니다. 표면적 지식이 아닌 영혼 깊은 곳에서 오는 통찰을 받아들이세요. 명상과 자기 성찰을 통해 숨겨진 진실을 발견할 수 있습니다.',
      '여황제': '대지의 풍요로움과 창조의 여신입니다. 자연의 풍부한 에너지가 당신을 감싸고 있습니다. 창조적 활동과 성장이 자연스럽게 이루어지는 시기입니다. 자신의 창조력을 자유롭게 표현하세요.',
      '황제': '강력한 리더십과 안정의 상징입니다. 체계적이고 구조화된 접근으로 목표를 달성할 수 있습니다. 권위와 책임감을 가지고 상황을 주도하세요. 확고한 기반 위에서 성공을 이룰 수 있습니다.',
      '교황': '영적 지혜와 전통의 가르침을 상징합니다. 지혜로운 스승의 가르침을 받아들이고, 전통적 가치관을 존중하세요. 교육과 학습을 통해 더 높은 차원의 깨달음을 얻을 수 있습니다.',
      '연인': '사랑과 조화, 그리고 중요한 선택의 순간입니다. 진정한 가치에 따라 결정을 내리세요. 관계에서 조화를 찾고, 마음의 소리에 귀 기울이세요. 선택의 결과가 당신의 운명을 결정합니다.',
      '전차': '강한 의지력과 승리의 상징입니다. 모든 장애물을 극복하고 목표를 향해 전진할 수 있습니다. 자신의 능력을 믿고 끊임없이 나아가세요. 승리는 이미 당신의 것입니다.',
      '힘': '내면의 강함과 부드러운 힘의 조화를 상징합니다. 폭력이 아닌 부드러운 힘으로 어려움을 극복하세요. 용기와 인내, 그리고 내면의 평화가 당신을 이끌 것입니다.',
      '은둔자': '고독을 통한 내면 탐구와 지혜의 상징입니다. 외부의 소음에서 벗어나 자신의 내면을 들여다보세요. 고독한 시간을 통해 진정한 지혜를 얻을 수 있습니다.',
      '운명의 수레바퀴': '변화와 운명의 순환을 상징합니다. 모든 것이 끊임없이 변화하는 우주의 법칙을 받아들이세요. 새로운 기회가 다가오고 있으며, 변화를 두려워하지 마세요.',
      '정의': '균형과 공정, 그리고 진실의 상징입니다. 모든 상황에서 공정하고 균형잡힌 판단을 하세요. 진실을 추구하고, 자신의 행동에 책임을 지세요.',
      '매달린 사람': '새로운 관점과 희생을 통한 깨달음을 상징합니다. 기존의 관점을 버리고 다른 시각으로 상황을 바라보세요. 때로는 희생을 통해 더 큰 깨달음을 얻을 수 있습니다.',
      '죽음': '변화와 재생, 새로운 시작을 상징합니다. 과거를 완전히 버리고 새로운 것을 받아들이세요. 끝은 새로운 시작이며, 변화를 통해 더 나은 미래를 만들 수 있습니다.',
      '절제': '균형과 조화, 그리고 치유를 상징합니다. 모든 것에서 균형을 찾고 조화를 이루세요. 인내와 치유를 통해 완전함에 도달할 수 있습니다.',
      '악마': '물질적 속박과 유혹을 상징합니다. 물질적 욕망에 얽매이지 말고 진정한 자유를 찾으세요. 자신의 약점을 인정하고 극복하는 것이 중요합니다.',
      '탑': '갑작스러운 변화와 계시를 상징합니다. 기존의 구조가 무너지고 새로운 깨달음이 찾아옵니다. 파괴를 두려워하지 말고 새로운 구조를 만드세요.',
      '별': '희망과 치유, 그리고 영감을 상징합니다. 어둠 속에서도 희망의 빛을 믿으세요. 치유의 에너지가 당신을 감싸고 있으며, 영감을 통해 새로운 길을 찾을 수 있습니다.',
      '달': '직감과 신비, 그리고 잠재의식의 상징입니다. 직감을 믿고 신비로운 통찰력을 활용하세요. 잠재의식의 메시지를 받아들이고, 환상과 현실의 경계를 이해하세요.',
      '태양': '성공과 행복, 그리고 활력의 상징입니다. 밝고 긍정적인 에너지가 당신을 감싸고 있습니다. 성공과 행복이 기다리고 있으며, 활력과 진실을 찾으세요.',
      '심판': '부활과 각성, 그리고 새로운 소명을 상징합니다. 새로운 삶과 소명을 받아들이세요. 각성의 시기가 왔으며, 더 높은 차원의 삶으로 나아갈 수 있습니다.',
      '세계': '완성과 성취, 그리고 통합을 상징합니다. 여정의 완성을 축하하세요. 모든 것이 조화롭게 통합되어 완전한 성취를 이루었습니다. 새로운 여정의 시작이기도 합니다.'
    };
    
    return meanings[card.name] || `${card.name}은(는) ${card.keywords.join(', ')}을(를) 상징하며, 현재 상황에서 중요한 의미를 가지고 있습니다.`;
  }

  getReversedMeaning(card) {
    const meanings = {
      '바보': '성급한 판단과 무모한 행동으로 인한 위험을 경고합니다. 기회를 놓치지 않도록 신중하게 접근하세요. 무지함이 오히려 위험을 초래할 수 있는 시기입니다.',
      '마법사': '의지력 부족과 기회 놓침으로 인한 좌절을 경험하고 있습니다. 부정적 사고를 버리고 자신의 능력을 믿으세요. 잠재력이 제대로 발휘되지 못하고 있습니다.',
      '여사제': '직감을 무시하고 표면적 사고에만 의존하고 있습니다. 내면의 소리에 귀 기울이고 깊은 통찰을 찾으세요. 영적 지혜가 차단되어 있습니다.',
      '여황제': '창조력 부족과 자연과의 단절로 인한 고립을 경험하고 있습니다. 창조적 에너지를 되찾고 자연과의 연결을 회복하세요. 풍요로움이 차단되어 있습니다.',
      '황제': '권위 부족과 불안정으로 인한 혼란을 경험하고 있습니다. 리더십을 강화하고 안정을 찾으세요. 체계적 접근이 부족합니다.',
      '교황': '전통에 대한 반발과 교육의 거부로 인한 혼란을 경험하고 있습니다. 배움의 기회를 놓치지 말고 지혜로운 가르침을 받아들이세요.',
      '연인': '불화와 잘못된 선택으로 인한 갈등을 경험하고 있습니다. 관계에서 조화를 찾고 진정한 가치에 따라 결정하세요. 선택의 실수가 발생할 수 있습니다.',
      '전차': '의지 부족과 패배로 인한 좌절을 경험하고 있습니다. 목표를 향한 의지를 강화하고 장애물을 극복하세요. 승리에 대한 두려움이 있습니다.',
      '힘': '내면의 약함과 두려움으로 인한 무력감을 경험하고 있습니다. 용기를 내어 어려움에 맞서고 내면의 강함을 믿으세요.',
      '은둔자': '과도한 고독과 방향 상실로 인한 외로움을 경험하고 있습니다. 외로움을 극복하고 다른 사람들과의 연결을 찾으세요.',
      '운명의 수레바퀴': '부정적인 변화와 기회 놓침으로 인한 후회를 경험하고 있습니다. 변화를 받아들이고 새로운 기회를 찾으세요.',
      '정의': '부정한 판단과 불균형으로 인한 혼란을 경험하고 있습니다. 공정함을 찾고 균형을 회복하세요. 편향된 시각이 문제입니다.',
      '매달린 사람': '무의미한 희생과 시간 낭비로 인한 후회를 경험하고 있습니다. 효율적으로 시간을 사용하고 의미 있는 선택을 하세요.',
      '죽음': '변화 거부와 과거에 매달림으로 인한 정체를 경험하고 있습니다. 변화를 받아들이고 새로운 시작을 하세요.',
      '절제': '불균형과 조화 부족으로 인한 혼란을 경험하고 있습니다. 균형을 찾고 조화를 이루세요. 과도함이 문제입니다.',
      '악마': '속박에서 해방과 깨달음을 통해 자유를 찾을 수 있습니다. 물질적 욕망에서 벗어나 진정한 자유를 추구하세요.',
      '탑': '파괴 회피와 점진적 변화를 통해 안전하게 변화할 수 있습니다. 급격한 변화 대신 점진적 개선을 추구하세요.',
      '별': '희망 상실과 절망으로 인한 어둠을 경험하고 있습니다. 희망을 되찾고 빛을 찾으세요. 영감이 차단되어 있습니다.',
      '달': '환상과 두려움, 혼란으로 인한 불안을 경험하고 있습니다. 현실을 직시하고 환상에서 벗어나세요.',
      '태양': '일시적 어려움과 과신으로 인한 실패를 경험할 수 있습니다. 겸손하게 접근하고 어려움을 극복하세요.',
      '심판': '각성 거부와 변화 거부로 인한 정체를 경험하고 있습니다. 깨달음을 받아들이고 변화를 거부하지 마세요.',
      '세계': '미완성과 불완전함으로 인한 불만족을 경험하고 있습니다. 완성을 위해 노력하고 불완전함을 극복하세요.'
    };
    
    return meanings[card.name] || `${card.name}의 역방향은 ${card.keywords.join(', ')}의 부족을 의미하며, 현재 상황에서 주의가 필요한 부분을 나타냅니다.`;
  }

  getUprightAdvice(card) {
    const advice = {
      '바보': '순수한 마음으로 새로운 기회를 놓치지 마세요. 두려움 없이 미지의 세계로 발을 내딛고, 모든 경험을 성장의 기회로 삼으세요. 무지함이 오히려 무한한 가능성을 열어줍니다.',
      '마법사': '자신의 능력을 믿고 창의적으로 접근하세요. 의지력이 성공의 열쇠이며, 우주의 모든 에너지가 당신을 돕고 있습니다. 원하는 모든 것을 현실로 만들 수 있는 능력이 있습니다.',
      '여사제': '직감을 믿고 내면의 지혜를 활용하세요. 명상이나 자기 성찰을 통해 숨겨진 진실을 발견할 수 있습니다. 영혼 깊은 곳에서 오는 통찰을 받아들이세요.',
      '여황제': '창조적 에너지를 자유롭게 표현하세요. 자연과의 연결을 통해 영감을 얻고, 풍요로운 에너지가 당신을 감싸고 있습니다. 창조적 활동과 성장이 자연스럽게 이루어집니다.',
      '황제': '강력한 리더십을 발휘하고 체계적으로 접근하세요. 안정과 구조가 중요하며, 권위와 책임감을 가지고 상황을 주도하세요. 확고한 기반 위에서 성공을 이룰 수 있습니다.',
      '교황': '전통적인 방법과 지혜로운 스승의 가르침을 받아들이세요. 교육과 학습을 통해 더 높은 차원의 깨달음을 얻을 수 있으며, 영적 지혜가 당신을 이끌 것입니다.',
      '연인': '진정한 가치에 따라 선택하세요. 사랑과 조화를 우선시하고, 마음의 소리에 귀 기울이세요. 선택의 결과가 당신의 운명을 결정하므로 신중하게 결정하세요.',
      '전차': '목표를 향해 끊임없이 전진하세요. 의지력으로 모든 장애물을 극복할 수 있으며, 승리는 이미 당신의 것입니다. 자신의 능력을 믿고 나아가세요.',
      '힘': '부드러운 힘으로 어려움을 극복하세요. 용기와 인내, 그리고 내면의 평화가 당신을 이끌 것입니다. 폭력이 아닌 부드러운 힘으로 모든 것을 해결할 수 있습니다.',
      '은둔자': '고독한 시간을 통해 진정한 지혜를 얻으세요. 내면 탐구가 중요하며, 외부의 소음에서 벗어나 자신의 내면을 들여다보세요. 고독이 지혜를 가져다줍니다.',
      '운명의 수레바퀴': '변화를 받아들이고 새로운 기회를 잡으세요. 모든 것이 끊임없이 변화하는 우주의 법칙을 이해하고, 변화를 두려워하지 마세요. 새로운 기회가 다가오고 있습니다.',
      '정의': '공정하고 균형잡힌 판단을 하세요. 진실을 추구하고, 모든 상황에서 공정함을 유지하세요. 자신의 행동에 책임을 지고 올바른 선택을 하세요.',
      '매달린 사람': '새로운 관점으로 상황을 바라보세요. 기존의 관점을 버리고 다른 시각이 필요합니다. 때로는 희생을 통해 더 큰 깨달음을 얻을 수 있습니다.',
      '죽음': '큰 변화를 받아들이고 새로운 시작을 하세요. 과거를 완전히 버리고 새로운 것을 받아들이세요. 끝은 새로운 시작이며, 변화를 통해 더 나은 미래를 만들 수 있습니다.',
      '절제': '균형과 조화를 찾으세요. 인내와 치유를 통해 완전함에 도달할 수 있으며, 모든 것에서 균형을 찾는 것이 중요합니다.',
      '악마': '물질적 속박에서 벗어나 진정한 자유를 찾으세요. 자신의 약점을 인정하고 극복하는 것이 중요하며, 물질적 욕망에 얽매이지 마세요.',
      '탑': '갑작스러운 변화를 받아들이고 새로운 구조를 만드세요. 기존의 구조가 무너지고 새로운 깨달음이 찾아옵니다. 파괴를 두려워하지 말고 새로운 것을 만드세요.',
      '별': '희망을 잃지 마세요. 치유와 영감의 에너지를 받고, 어둠 속에서도 희망의 빛을 믿으세요. 영감을 통해 새로운 길을 찾을 수 있습니다.',
      '달': '직감을 믿고 신비로운 통찰력을 활용하세요. 잠재의식의 메시지를 받아들이고, 환상과 현실의 경계를 이해하세요. 신비로운 통찰이 당신을 이끌 것입니다.',
      '태양': '성공과 행복을 믿으세요. 활력과 진실을 찾고, 밝고 긍정적인 에너지가 당신을 감싸고 있습니다. 성공과 행복이 기다리고 있습니다.',
      '심판': '새로운 삶과 소명을 받아들이세요. 각성의 시기가 왔으며, 더 높은 차원의 삶으로 나아갈 수 있습니다. 부활과 각성을 통해 새로운 소명을 발견하세요.',
      '세계': '완성과 성취를 축하하세요. 모든 것이 조화롭게 통합되어 완전한 성취를 이루었습니다. 새로운 여정의 시작이기도 하니 새로운 도전을 준비하세요.'
    };
    
    return advice[card.name] || `${card.name}의 긍정적 에너지를 활용하여 현재 상황을 개선하고, 카드의 메시지를 실생활에 적용해보세요.`;
  }

  getReversedAdvice(card) {
    const advice = {
      '바보': '성급한 판단을 피하고 신중하게 접근하세요. 기회를 놓치지 않도록 주의하세요.',
      '마법사': '의지력을 강화하고 부정적 사고를 버리세요. 기회를 놓치지 마세요.',
      '여사제': '직감을 무시하지 말고 내면의 소리에 귀 기울이세요.',
      '여황제': '창조적 에너지를 되찾으세요. 자연과의 연결을 회복하세요.',
      '황제': '리더십을 강화하고 안정을 찾으세요. 체계적인 접근이 필요합니다.',
      '교황': '전통과 교육의 가치를 인정하세요. 배움의 기회를 놓치지 마세요.',
      '연인': '갈등을 해결하고 조화를 찾으세요. 잘못된 선택을 피하세요.',
      '전차': '의지를 강화하고 목표를 향해 전진하세요. 패배를 두려워하지 마세요.',
      '힘': '용기를 내어 어려움에 맞서세요. 내면의 강함을 믿으세요.',
      '은둔자': '과도한 고독을 피하고 외로움을 극복하세요.',
      '운명의 수레바퀴': '부정적인 변화를 받아들이고 새로운 기회를 찾으세요.',
      '정의': '공정함을 찾고 불균형을 해결하세요.',
      '매달린 사람': '무의미한 희생을 피하고 시간을 효율적으로 사용하세요.',
      '죽음': '변화를 받아들이고 과거에 매달리지 마세요.',
      '절제': '균형을 찾고 조화를 이루세요.',
      '악마': '속박에서 해방되고 진정한 자유를 찾으세요.',
      '탑': '파괴를 피하고 점진적 변화를 추구하세요.',
      '별': '희망을 되찾고 절망을 극복하세요.',
      '달': '환상을 버리고 현실을 직시하세요.',
      '태양': '과신을 피하고 겸손하게 접근하세요.',
      '심판': '각성을 받아들이고 변화를 거부하지 마세요.',
      '세계': '완성을 위해 노력하고 불완전함을 극복하세요.'
    };
    
    return advice[card.name] || `${card.name}의 부정적 에너지를 극복하고 긍정적 방향으로 전환하세요.`;
  }

  getOverallInterpretation(cards, question) {
    const uprightCount = cards.filter(c => c.orientation === 'upright').length;
    const reversedCount = cards.filter(c => c.orientation === 'reversed').length;
    
    let overall = '';
    
    if (uprightCount > reversedCount) {
      overall += '**전체적으로 긍정적인 에너지**가 흐르고 있습니다. ';
      overall += '현재 상황에서 희망과 가능성을 찾을 수 있으며, ';
      overall += '적극적인 행동과 긍정적인 마음가짐이 도움이 될 것입니다.\n\n';
    } else if (reversedCount > uprightCount) {
      overall += '**도전과 어려움**이 있는 시기입니다. ';
      overall += '현재 상황을 재검토하고 새로운 접근법을 고려해보세요. ';
      overall += '인내와 지혜로 어려움을 극복할 수 있습니다.\n\n';
    } else {
      overall += '**균형과 조화**가 필요한 시기입니다. ';
      overall += '상황을 객관적으로 바라보고 균형잡힌 접근이 필요합니다.\n\n';
    }
    
    overall += '**조언**: 카드의 메시지를 참고하여 현재 상황에서 최선의 선택을 하시기 바랍니다. ';
    overall += '타로는 미래를 예측하는 것이 아니라 현재 상황에 대한 통찰을 제공합니다. ';
    overall += '자신의 직감과 판단력을 믿고 행동하세요.\n\n';
    
    overall += '*이 해석은 참고용이며, 최종 결정은 본인의 판단에 따라 하시기 바랍니다.*';
    
    return overall;
  }

  getAvailableSpreads() {
    return this.spreads;
  }

  getCardById(id) {
    return this.cards.find(card => card.id.toString() === id);
  }
}

module.exports = { TarotService };
